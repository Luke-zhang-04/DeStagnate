/**
 * Destagnate v2.0.0 | https://luke-zhang-04.github.io/DeStagnate/
 * @copyright (C) 2020 - 2021 Luke Zhang https://luke-zhang-04.github.io
 * @license MIT
 */
const t="https://luke-zhang-04.github.io/DeStagnate/error-codes",i=(t,i,n=!1)=>{if(i)for(const[o,e]of Object.entries(i))"string"==typeof e||"number"==typeof e?"innerHTML"===o?t.innerHTML=e.toString():n?t.setAttributeNS(null,o,e.toString()):t.setAttribute(o,e.toString()):"on"===o.slice(0,2)?"function"==typeof e&&t.addEventListener(o.slice(2).toLowerCase(),e):"ref"===o&&"object"==typeof e&&"current"in e?e.current=t:void 0!==e&&console.warn(typeof e+" is not a valid DeStagnate child")},n=(i,o)=>{if(null!=o)if(o instanceof Array)o.forEach((t=>n(i,t)));else if("string"==typeof o||"number"==typeof o)i.appendChild(document.createTextNode(o.toString()));else if(o instanceof d){if(!o.didMount&&i instanceof window.HTMLElement)return void o.mount(i);if(!(i instanceof window.HTMLElement))throw new Error(`ERROR: code 3. See ${t}`);o.parent!==i&&(o.parent=i),o.forceUpdate()}else i.appendChild(o)};function o(t,o,...e){if("string"==typeof t){const s=document.createElement(t);return i(s,o),n(s,e),s}return"function"==typeof t?t(o,e):Error("tagNameOrComponent is of invalid type.")}const e=(t,o,e,...s)=>{const r=document.createElementNS(t,o);return i(r,e,!0),n(r,s),r},s=()=>({current:null});class r{constructor(){this.createElement=o,this.createElementNS=e,this.createRef=s,this.componentDidCatch=t=>console.error(t),this.shouldComponentUpdate=()=>!0,this.render=()=>null}}r.createElement=o,r.createElementNS=e,r.createRef=s;const h=["onFocus","onBlur","onFocusIn","onFocusOut","onAnimationStart","onAnimationCancel","onAnimationEnd","onAnimationIteration","onTransitionStart","onTransitionCancel","onTransitionEnd","onTransitionRun","onAuxClick","onClick","onDblClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOver","onMouseOut","onMouseUp","onWheel"],c=["onLoad","onOnline","onOffline","onResize","onScroll","onKeyDown","onKeyPress","onKeyUp"];class u extends r{constructor(){super(...arguments),this.bindEventListeners=t=>{this.t(t.addEventListener),this.t(window.addEventListener,c)},this.unbindEventListeners=t=>{this.t(t.removeEventListener),this.t(window.removeEventListener,c)},this.t=(t,i=h)=>{for(const n of i){const i=n.slice(2).toLowerCase(),o=this[n];void 0!==o&&o instanceof Function&&t(i,o)}}}}const f=(t,i,n=3,o=10)=>{if(0===n)return t===i;if(typeof t!=typeof i)return!1;if(t instanceof Array&&i instanceof Array){if(t.length!==i.length)return!1;if(t.length>o||i.length>o)return t===i;for(let e=0;e<t.length;e++)if(!f(t[e],i[e],n-1,o))return!1;return!0}if(t instanceof Object&&i instanceof Object){if(!f(Object.keys(t),Object.keys(i),n-1,o))return!1;for(const e of Object.keys(t))if(!f(t[e],i[e],n-1,o))return!1;return!0}return t===i};var a={isEqual:f};const l="Refusing to update unmounted component";class d extends u{constructor(i,n){if(super(),this.props=n,this.i={},this.o=!1,this.h=!1,this.forceUpdate=()=>{var i,n;try{if(!this.h)throw new Error(l);if(null===(i=this.componentDidUpdate)||void 0===i||i.call(this),void 0===this.u)throw new Error(`ERROR: code 2. See ${t}.`);null===(n=this.getSnapshotBeforeUpdate)||void 0===n||n.call(this,Object.assign({},this.props),Object.assign({},this.state)),this.l(this.v())}catch(t){return this.p(t)}},this.stateDidChange=(t,i=3,n=15)=>{var o;if(void 0===t)return!a.isEqual(this.i,this.O,i,n);const e={},s={};for(const i of t)e[i]=this.i[i],s[i]=null===(o=this.O)||void 0===o?void 0:o[i];return!a.isEqual(e,s,i,n)},this.setState=i=>{var n,o;try{if(!this.h)throw new Error(l);if(null===(n=this.componentWillUpdate)||void 0===n||n.call(this),void 0===this.u)throw new Error(`ERROR: code 2. See ${t}.`);this.O=Object.assign({},this.i),null===(o=this.getSnapshotBeforeUpdate)||void 0===o||o.call(this,Object.assign({},this.props),Object.assign({},this.state)),Object.assign(this.i,i);const e=this.shouldComponentUpdate()?this.v():void 0;this.l(e)}catch(t){return this.p(t)}},this.mountComponent=i=>{var n,o;try{if(void 0!==i&&(this.parent=i),void 0===this.u)throw new Error(`ERROR: code 2. See ${t}.`);const e=this.render();if(this.o=!0,null===(n=this.componentWillMount)||void 0===n||n.call(this),null===e)throw new Error(`ERROR: code 3. See ${t}.`);if(this.bindEventListeners(this.u),this.h=!0,null===(o=this.componentDidMount)||void 0===o||o.call(this),e instanceof Array){const t=document.createDocumentFragment();return e.forEach((i=>t.appendChild(i))),this.u.appendChild(t)}return this.u.appendChild(e)}catch(t){return this.p(t)}},this.mount=this.mountComponent,this.unmountComponent=()=>{var t;try{if(void 0===this.u)return;null===(t=this.componentWillUnmount)||void 0===t||t.call(this),this.unbindEventListeners(this.u),this.R(),this.h=!1}catch(t){this.p(t)}},this.unmount=this.unmountComponent,this.R=()=>{if(void 0===this.u)throw new Error(`ERROR: code 2. See ${t}.`);for(;this.u.firstChild;)this.u.lastChild&&this.u.removeChild(this.u.lastChild)},this.v=()=>(this.R(),this.render()),this.l=t=>{var i,n,o;if(t instanceof Array)for(const n of t)null===(i=this.u)||void 0===i||i.appendChild(n);else t&&(null===(n=this.u)||void 0===n||n.appendChild(t));t&&(null===(o=this.componentDidUpdate)||void 0===o||o.call(this))},this.p=t=>{if(t instanceof Error)return this.componentDidCatch(t),t;const i=new Error(String(t));return this.componentDidCatch(i),i},null===i)throw new Error("Parent is null, expected HTMLElement | undefined.");this.u=i}get getState(){return this.state}get state(){return this.i}set state(i){this.o?(this.componentDidCatch(new Error(`ERROR: code 1. See ${t}.`)),this.setState(i)):(this.i=i,this.o=!0)}get getProps(){return this.props}set parent(t){this.u=t}get parent(){return this.u}get didMount(){return this.h}get prevState(){return this.O}}const v=(t,...i)=>{const o=document.createDocumentFragment();return n(o,i),o};var w;!function(t){t.Component=d,t.createRef=s,t.createElement=o,t.createElementNS=e,t.Fragment=v}(w||(w={}));var p=w;export default p;export{d as Component,w as DeStagnate,v as Fragment,o as createElement,e as createElementNS,s as createRef};
